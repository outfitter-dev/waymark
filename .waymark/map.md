<!-- tldr ::: generated map of repo waymarks #docs/rules -->
# Waymark Map

Generated on 2025-10-02T10:28:36.908Z.

## TLDR Waymarks
- AGENTS.md:1 — <!-- tldr ::: agents configuration and development guidelines -->
- apps/mcp/src/index.test.ts:1 — // tldr ::: tests for MCP waymark insertion utilities
- apps/mcp/src/index.ts:2 — // tldr ::: stdio MCP server bridging waymark CLI capabilities
- apps/mcp/src/prompts/index.ts:1 — // tldr ::: prompt registry for waymark MCP server
- apps/mcp/src/prompts/tldr.ts:1 — // tldr ::: tldr prompt handler for waymark MCP server
- apps/mcp/src/prompts/todo.ts:1 — // tldr ::: todo prompt handler for waymark MCP server
- apps/mcp/src/resources/index.ts:1 — // tldr ::: resource registry for waymark MCP server
- apps/mcp/src/resources/map.ts:1 — // tldr ::: map resource handler for waymark MCP server
- apps/mcp/src/resources/todos.ts:1 — // tldr ::: todos resource handler for waymark MCP server
- apps/mcp/src/tools/graph.ts:1 — // tldr ::: graph tool handler for waymark MCP server
- apps/mcp/src/tools/index.ts:1 — // tldr ::: tool registry for waymark MCP server
- apps/mcp/src/tools/insert.ts:1 — // tldr ::: insert tool handler for waymark MCP server
- apps/mcp/src/tools/map.ts:1 — // tldr ::: map tool handler for waymark MCP server
- apps/mcp/src/tools/scan.ts:1 — // tldr ::: scan tool handler for waymark MCP server
- apps/mcp/src/types.ts:1 — // tldr ::: shared types and schemas for MCP server
- apps/mcp/src/utils/config.ts:1 — // tldr ::: config loading helpers for MCP server
- apps/mcp/src/utils/filesystem.ts:1 — // tldr ::: filesystem utilities for directory walking and path normalization
- docs/about/priors.md:1 — <!-- tldr ::: Historical precedents and inspiration for waymark anchor patterns -->
- docs/development/AGENTS.md:1 — <!-- tldr ::: guide to agent-assisted development practices and tooling choices for waymark -->
- docs/development/ARCHITECTURE.md:1 — <!-- tldr ::: architectural philosophy and module organization guidelines for waymark codebase -->
- docs/waymark/SPEC.md:1 — <!-- tldr ::: canonical specification for the Waymark v1 grammar -->
- docs/waymark/tui-ab-plan.md:1 — <!-- tldr ::: comparative plan for opentui vs React Ink waymark TUIs #docs/plan -->
- IMPROVEMENTS.md:1 — <!-- tldr ::: short-term checklist for CLI ergonomics improvements and refactoring #docs/plan -->
- packages/agents/src/index.ts:1 — // tldr ::: waymark agent toolkit exports
- packages/cli/src/commands/find.ts:1 — // tldr ::: find command helpers for waymark CLI
- packages/cli/src/commands/fmt.ts:1 — // tldr ::: format command helpers for waymark CLI
- packages/cli/src/commands/format.help.ts:1 — // tldr ::: human-facing help text for format command
- packages/cli/src/commands/format.help.ts:38 — // tldr ::: payment processor
- packages/cli/src/commands/format.prompt.ts:1 — // tldr ::: agent-facing usage guide for format command
- packages/cli/src/commands/format.prompt.ts:32 — // tldr ::: payment processor
- packages/cli/src/commands/format.prompt.ts:35 — // tldr ::: payment processor
- packages/cli/src/commands/graph.ts:1 — // tldr ::: graph command helpers for waymark CLI
- packages/cli/src/commands/help.ts:1 — // tldr ::: help command helper for waymark CLI (legacy - migrating to help/ directory)
- packages/cli/src/commands/help/index.ts:1 — // tldr ::: help system exports for waymark CLI
- packages/cli/src/commands/help/registry.ts:1 — // tldr ::: centralized help text registry for all CLI commands
- packages/cli/src/commands/help/render.ts:1 — // tldr ::: help text rendering utilities for CLI commands
- packages/cli/src/commands/help/types.ts:1 — // tldr ::: type definitions for CLI help system
- packages/cli/src/commands/lint.help.ts:1 — // tldr ::: human-facing help text for lint command
- packages/cli/src/commands/lint.prompt.ts:1 — // tldr ::: agent-facing usage guide for lint command
- packages/cli/src/commands/lint.ts:1 — // tldr ::: lint command helpers for waymark CLI
- packages/cli/src/commands/map.ts:1 — // tldr ::: map command helpers for waymark CLI
- packages/cli/src/commands/migrate.help.ts:1 — // tldr ::: human-facing help text for migrate command
- packages/cli/src/commands/migrate.prompt.ts:1 — // tldr ::: agent-facing usage guide for migrate command
- packages/cli/src/commands/migrate.ts:1 — // tldr ::: migrate command helpers for waymark CLI
- packages/cli/src/commands/scan.ts:1 — // tldr ::: scan command helpers for waymark CLI
- packages/cli/src/commands/tui.ts:1 — // tldr ::: placeholder tui command handler
- packages/cli/src/commands/unified/filters.ts:1 — // tldr ::: filtering utilities for unified wm command
- packages/cli/src/commands/unified/flag-handlers.ts:1 — // tldr ::: flag handling utilities for unified wm command
- packages/cli/src/commands/unified/index.help.ts:1 — // tldr ::: human-facing help text for unified wm command
- packages/cli/src/commands/unified/index.prompt.ts:1 — // tldr ::: agent-facing usage guide for unified wm command
- packages/cli/src/commands/unified/index.prompt.ts:14 — // tldr ::: user service managing auth
- packages/cli/src/commands/unified/index.ts:1 — // tldr ::: unified wm command orchestration and execution
- packages/cli/src/commands/unified/parser.ts:1 — // tldr ::: argument parsing for unified wm command
- packages/cli/src/commands/unified/parsers.ts:1 — // tldr ::: value parsing utilities for unified command flags
- packages/cli/src/commands/unified/query-parser.test.ts:1 — // tldr ::: tests for natural language query parser
- packages/cli/src/commands/unified/query-parser.ts:1 — // tldr ::: natural language query parsing for waymark CLI
- packages/cli/src/commands/unified/types.ts:1 — // tldr ::: type definitions for unified wm command
- packages/cli/src/index.test.ts:1 — // tldr ::: smoke and snapshot tests for waymark CLI handlers
- packages/cli/src/index.ts:3 — // tldr ::: waymark CLI entry point using commander for command routing and parsing
- packages/cli/src/types.ts:1 — // tldr ::: shared CLI types
- packages/cli/src/utils/content-loader.ts:1 — // tldr ::: convention-based loader for help and prompt content files
- packages/cli/src/utils/context.ts:1 — // tldr ::: context creation helpers for waymark CLI commands
- packages/cli/src/utils/display/formatters/long.ts:1 — // tldr ::: long format display for waymark records showing all properties
- packages/cli/src/utils/display/formatters/text.ts:1 — // tldr ::: text formatting utilities for waymark records
- packages/cli/src/utils/display/formatters/tree.ts:1 — // tldr ::: tree format display for waymark records grouped by directory structure
- packages/cli/src/utils/display/grouping.ts:1 — // tldr ::: grouping utilities for waymark records
- packages/cli/src/utils/display/index.ts:1 — // tldr ::: display formatting orchestration for waymark records
- packages/cli/src/utils/display/pagination.ts:1 — // tldr ::: pagination utilities for waymark records
- packages/cli/src/utils/display/sorting.ts:1 — // tldr ::: sorting utilities for waymark records
- packages/cli/src/utils/display/types.ts:1 — // tldr ::: shared types for display formatting utilities
- packages/cli/src/utils/flags/iterator.ts:1 — // tldr ::: shared iterator utilities for CLI flag parsing
- packages/cli/src/utils/flags/json.ts:1 — // tldr ::: helper to handle --json flag parsing
- packages/cli/src/utils/flags/mention.ts:1 — // tldr ::: helper for --mention flag parsing
- packages/cli/src/utils/flags/string-list.ts:1 — // tldr ::: helpers for list-style flags with string values
- packages/cli/src/utils/flags/summary.ts:1 — // tldr ::: helper to handle --summary flag parsing
- packages/cli/src/utils/flags/tag.ts:1 — // tldr ::: helper for --tag flag parsing
- packages/cli/src/utils/flags/type.ts:1 — // tldr ::: helper for --type flag parsing
- packages/cli/src/utils/fs.ts:1 — // tldr ::: filesystem helpers for expanding waymark CLI inputs
- packages/cli/src/utils/ignore.ts:1 — // tldr ::: enhanced ignore system combining gitignore and config-based patterns
- packages/cli/src/utils/logger.test.ts:1 — // tldr ::: tests for pino logger configuration and level control
- packages/cli/src/utils/logger.ts:1 — // tldr ::: pino-based logger configuration for CLI with level control
- packages/cli/src/utils/map-rendering.ts:1 — // tldr ::: map formatting and rendering utilities for waymark CLI
- packages/cli/src/utils/options.ts:1 — // tldr ::: global option parsing utilities for waymark CLI
- packages/cli/src/utils/output.ts:1 — // tldr ::: rendering helpers for CLI record output
- packages/cli/src/utils/prompts.ts:1 — // tldr ::: interactive prompts using inquirer for CLI confirmations and selection
- packages/core/src/cache/files.ts:1 — // tldr ::: file tracking and staleness detection for waymark cache
- packages/core/src/cache/index.test.ts:1 — // tldr ::: tests for waymark cache invalidation and metadata tracking
- packages/core/src/cache/index.ts:1 — // tldr ::: SQLite cache orchestration for waymark records and dependency graphs
- packages/core/src/cache/queries.ts:1 — // tldr ::: query operations for waymark cache including search helpers
- packages/core/src/cache/schema.ts:1 — // tldr ::: SQLite schema creation and migration helpers for waymark cache
- packages/core/src/cache/serialization.ts:1 — // tldr ::: waymark record serialization and deserialization helpers
- packages/core/src/cache/writes.ts:1 — // tldr ::: write operations for waymark cache including batch inserts
- packages/core/src/config.test.ts:1 — // tldr ::: tests for config loading and scope resolution
- packages/core/src/config.ts:1 — // tldr ::: default waymark configuration helpers, disk loading, and normalization utilities
- packages/core/src/format.test.ts:1 — // tldr ::: tests for waymark formatting utilities
- packages/core/src/format.ts:1 — // tldr ::: formatting utilities for normalizing waymark comments
- packages/core/src/graph.test.ts:1 — // tldr ::: tests for waymark relation graph builder
- packages/core/src/graph.ts:1 — // tldr ::: relation graph helpers for waymark dependency analysis
- packages/core/src/index.test.ts:1 — // tldr ::: tests for core waymark parser
- packages/core/src/index.ts:1 — // tldr ::: core waymark utilities with caching and scanning
- packages/core/src/map.test.ts:1 — // tldr ::: tests for waymark map aggregation helpers
- packages/core/src/map.ts:1 — // tldr ::: helpers for aggregating waymarks into file and type summaries
- packages/core/src/normalize.test.ts:1 — // tldr ::: tests for waymark record normalization functions
- packages/core/src/normalize.ts:1 — // tldr ::: normalization helpers for waymark records and related fields
- packages/core/src/search.test.ts:1 — // tldr ::: tests for waymark search helpers
- packages/core/src/search.ts:1 — // tldr ::: utility helpers for filtering waymark records
- packages/core/src/types.ts:1 — // tldr ::: configuration and scanning types for waymark core
- packages/grammar/src/builder.ts:1 — // tldr ::: waymark record construction and continuation processing
- packages/grammar/src/constants.ts:1 — // tldr ::: waymark grammar constants and blessed markers
- packages/grammar/src/content.ts:1 — // tldr ::: content segment processing and continuation handling for waymark grammar
- packages/grammar/src/index.ts:1 — // tldr ::: waymark grammar parser exports
- packages/grammar/src/metadata.ts:1 — // tldr ::: file language and category inference for waymark records
- packages/grammar/src/parser.test.ts:1 — // tldr ::: unit tests for waymark grammar parser behaviors
- packages/grammar/src/parser.ts:1 — // tldr ::: core parser orchestration for waymark grammar syntax
- packages/grammar/src/properties.ts:1 — // tldr ::: property, mention, and tag extraction utilities for waymark grammar
- packages/grammar/src/tokenizer.ts:1 — // tldr ::: tokenization utilities for waymark grammar parsing
- packages/grammar/src/types.ts:1 — // tldr ::: core type definitions for waymark grammar
- PLAN.md:1 — <!-- tldr ::: execution roadmap and decision log for the Waymark v1 rebuild -->
- README.md:1 — <!-- tldr ::: Overview of the Waymark project and key resources -->
- README.md:18 — // tldr ::: managing customer authentication flow
- SCRATCHPAD.md:1 — <!-- tldr ::: running log of agent activities and discoveries #docs/rules -->
- scripts/waymark-audit.ts:2 — // tldr ::: developer helper to run common ripgrep audits for waymarks #scripts/audit
- scripts/waymark-map.ts:3 — // tldr ::: generate markdown map of all waymarks by type using Bun concurrency #scripts/waymarks
- test/setup.ts:1 — // tldr ::: global test setup for Bun test runner

## TODO Waymarks
- docs/development/ARCHITECTURE.md:329 — // todo ::: first line
- docs/waymark/SPEC.md:26 — // todo ::: rewrite parser for streaming
- docs/waymark/SPEC.md:180 — // todo ::: @agent add idempotency key handling fixes:#payments/stripe-webhook
- docs/waymark/tui-ab-plan.md:86 — <!-- todo ::: summarize findings and mark chosen TUI path once evaluation wraps -->
- packages/agents/src/index.ts:8 — // todo ::: implement agent toolkit
- packages/cli/dist/wm.js:40180 — // todo ::: implement OAuth
- packages/cli/dist/wm.js:40181 — // todo ::: implement OAuth
- packages/cli/dist/wm.js:40493 — // todo ::: implement OAuth
- packages/cli/dist/wm.js:40590 — // todo ::: implement auth #sec
- packages/cli/src/commands/format.help.ts:36 — // todo ::: implement auth
- packages/cli/src/commands/format.help.ts:42 — // todo ::: implement auth
- packages/cli/src/commands/format.prompt.ts:64 — // todo ::: implement OAuth
- packages/cli/src/commands/format.prompt.ts:65 — // todo ::: implement OAuth
- packages/cli/src/commands/migrate.help.ts:47 — // todo ::: implement authentication
- packages/cli/src/commands/migrate.prompt.ts:93 — // todo ::: implement OAuth
- packages/cli/src/commands/unified/index.prompt.ts:12 — // todo ::: implement auth #sec
- packages/cli/src/index.test.ts:927 — // todo ::: @alice task two
- packages/cli/src/index.test.ts:951 — // todo ::: @alice different task #perf
- packages/cli/src/index.test.ts:965 — // todo ::: @alice task two
- packages/grammar/src/metadata.ts:6 — // todo ::: @codex externalize comment leader detection into shared language metadata #lib/parser
- packages/grammar/src/metadata.ts:107 — // todo ::: @codex allow configurable overrides for file category inference #lib/parser
- test/setup.ts:6 — // todo ::: add global test setup when needed
- test/setup.ts:10 — // todo ::: add global test cleanup when needed

## THIS Waymarks
- docs/waymark/SPEC.md:179 — // this ::: Stripe webhook verification handler #perf:hotpath
- docs/waymark/SPEC.md:189 — <!-- this ::: workflow overview for installing the CLI -->
- docs/waymark/SPEC.md:195 — # this ::: orchestrates outbound email delivery #comm/email

## Other Waymarks
- docs/development/ARCHITECTURE.md:330 — // ::: continuation
- docs/waymark/SPEC.md:27 — // ::: preserve backwards-compatible signature
- docs/waymark/SPEC.md:28 — // ::: coordinate rollout with @devops
- docs/waymark/SPEC.md:181 — // review ::: @alice confirm retry strategy #sec:boundary
- docs/waymark/SPEC.md:182 — // note ::: logs PII-hardened metadata only #docs/logging
- docs/waymark/tui-ab-plan.md:111 — <!-- note ::: revisit this doc after A/B cycle to archive losing approach and formalize follow-ups -->
- packages/cli/dist/wm.js:40149 — // ::: handles webhooks
- packages/cli/dist/wm.js:40152 — // ::: handles webhooks
- packages/cli/dist/wm.js:40184 — // *fix ::: validate input
- packages/cli/dist/wm.js:40496 — // fix ::: validate email format
- packages/cli/dist/wm.js:40499 — /* hack ::: this is a hack */
- packages/cli/dist/wm.js:40591 — // *fix ::: validate input @alice
- packages/cli/dist/wm.js:40593 — // ^wip ::: refactoring in progress
- packages/cli/src/commands/format.help.ts:39 — // ::: handles Stripe webhooks
- packages/cli/src/commands/format.help.ts:43 — // *fix ::: validate input
- packages/cli/src/commands/format.help.ts:45 — // ::: handles Stripe webhooks
- packages/cli/src/commands/format.prompt.ts:33 — // ::: handles webhooks
- packages/cli/src/commands/format.prompt.ts:36 — // ::: handles webhooks
- packages/cli/src/commands/format.prompt.ts:68 — // *fix ::: validate input
- packages/cli/src/commands/migrate.help.ts:48 — // fix ::: validate email format
- packages/cli/src/commands/migrate.help.ts:49 — /* hack ::: this is a hack */
- packages/cli/src/commands/migrate.help.ts:50 — // deprecated ::: Use authenticate() instead
- packages/cli/src/commands/migrate.prompt.ts:96 — // fix ::: validate email format
- packages/cli/src/commands/migrate.prompt.ts:99 — /* hack ::: this is a hack */
- packages/cli/src/commands/unified/index.prompt.ts:13 — // *fix ::: validate input @alice
- packages/cli/src/commands/unified/index.prompt.ts:15 — // ^wip ::: refactoring in progress
- packages/cli/src/index.test.ts:915 — // fix ::: handle error
- packages/cli/src/index.test.ts:916 — // note ::: this is a note`;
- packages/cli/src/index.test.ts:928 — // fix ::: @agent bug fix`;
- packages/cli/src/index.test.ts:939 — // fix ::: bug fix #sec
- packages/cli/src/index.test.ts:940 — // note ::: note text #perf`;
- packages/cli/src/index.test.ts:952 — // fix ::: @agent bug #sec`;
- packages/cli/src/index.test.ts:966 — // fix ::: @agent bug fix`;
- packages/cli/src/index.test.ts:977 — // fix ::: handle cache miss
- packages/cli/src/index.test.ts:978 — // note ::: other content`;
- packages/cli/src/index.test.ts:990 — // fix ::: bug fix
- packages/cli/src/index.test.ts:991 — // note ::: note text`;

### Other Marker Counts
- deprecated: 1
- fix: 15
- hack: 3
- note: 6
- review: 1
- wip: 2

## Ignored
```jsonc
{
  "keepMarkers": [
    "tldr"
  ],
  "ignore": [
    ".waymark/rules*.md",
    "AGENTS.md",
    "PLAN.md",
    "PRD.md",
    "README.md",
    "SCRATCHPAD.md"
  ]
}
```